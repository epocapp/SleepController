<Window x:Class="SleepController.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sleep Controller" Height="452" Width="611" ResizeMode="NoResize">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Label Content="Pre-sleep command:" Grid.Row="0" />
        <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,4,0,8">
            <TextBox Name="PreCmdText" Width="378" />
            <TextBox Name="PreArgsText" Width="89" Margin="8,0,0,0" />
            <Button Name="PreBrowse" Content="Browse" Width="80" Margin="8,0,0,0" Click="PreBrowse_Click" />
        </StackPanel>

        <Label Content="Post-wake command:" Grid.Row="2" />
        <StackPanel Orientation="Horizontal" Grid.Row="3" Margin="0,4,0,8">
            <TextBox Name="PostCmdText" Width="378" />
            <TextBox Name="PostArgsText" Width="87" Margin="8,0,0,0" />
            <Button Name="PostBrowse" Content="Browse" Width="80" Margin="8,0,0,0" Click="PostBrowse_Click" />
        </StackPanel>

        <StackPanel Grid.Row="4" Orientation="Vertical" HorizontalAlignment="Center" Margin="0,16,0,0" Width="566" >
            <TextBlock x:Name="BlockerStatusText" Text="Sleep blockers: checking..." Foreground="Gray" TextWrapping="Wrap" Margin="10,0,0,6" />
            <StackPanel Orientation="Horizontal" Margin="10,0,0,6">
                <CheckBox x:Name="PreventRdpChk" Content="Prevent sleep during RDP session" VerticalAlignment="Center" Width="260" />
                <CheckBox x:Name="UseWindowsTimeoutChk" Content="Use Windows sleep timeout" VerticalAlignment="Center" Width="200" Margin="12,0,0,0" Visibility="Hidden" />
                <TextBlock x:Name="OsTimeoutInfo" Text="" VerticalAlignment="Center" Foreground="Gray" Width="90" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="10,0,0,0">
                <TextBlock x:Name="OverridesStatusText" Text="Windows overrides: loading..." Foreground="Gray" TextWrapping="Wrap" Width="450" />
            </StackPanel>
            <GroupBox Header="Current blockers (ignore per app in this tool)" Height="174">
                <StackPanel Orientation="Vertical" Height="184">
                    <ListView x:Name="BlockersList" Height="120" Margin="0,4,0,4" SelectionMode="Extended" ScrollViewer.HorizontalScrollBarVisibility="Visible">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Foreground" Value="Black" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsIgnored}" Value="True">
                                        <Setter Property="Foreground" Value="Red" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Type" Width="80" DisplayMemberBinding="{Binding CallerType}" />
                                <GridViewColumn Header="Section" Width="80" DisplayMemberBinding="{Binding Section}" />
                                <GridViewColumn Header="Name" Width="220" DisplayMemberBinding="{Binding Name}" />
                                <GridViewColumn Header="Details" Width="150" DisplayMemberBinding="{Binding Line}" />
                                <GridViewColumn Header="State" Width="70" DisplayMemberBinding="{Binding State}" />
                            </GridView>
                        </ListView.View>
                    </ListView>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Bottom">
                        <Button x:Name="RefreshBlockersBtn" Content="Refresh" Width="80" Margin="0,0,8,0" Click="RefreshBlockersBtn_Click" />
                        <Button x:Name="OverrideSelectedBtn" Content="Ignore Selected" Width="130" Margin="0,0,8,0" Click="OverrideSelectedBtn_Click" />
                        <Button x:Name="RemoveOverrideBtn" Content="Remove Ignore" Width="120" Click="RemoveOverrideBtn_Click" />
                    </StackPanel>
                </StackPanel>
            </GroupBox>
            <StackPanel Orientation="Horizontal" Margin="10,0,0,6" VerticalAlignment="Bottom">
                <ProgressBar x:Name="IdleProgress" Width="137" Height="18" />
                <Label Content="Idle minutes:" VerticalAlignment="Center" Margin="8,0,8,0" />
                <TextBox x:Name="IdleMinutesText" Width="60" VerticalAlignment="Center" />
                <Button x:Name="ShowLogBtn" Content="Show Log" Width="80" Margin="8,0,0,0" Click="ShowLogBtn_Click" />
                <Button x:Name="SaveBtn" Content="Save" Width="80" Margin="8,0,0,0" Click="SaveBtn_Click" />
                <Button x:Name="CloseBtn" Content="Close" Width="80" Margin="8,0,0,0" Click="CloseBtn_Click" />
            </StackPanel>
        </StackPanel>

        <!-- Idle progress bar bottom-left -->
    </Grid>
</Window>
